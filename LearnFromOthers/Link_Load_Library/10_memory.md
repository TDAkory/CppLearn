# Memory

## 程序内存布局

```c
// |-----------------------|   0xFFFFFFFF
// |      kernel space     |
// |-----------------------|   0xC0000000
// |        stack          |
// |-----------------------|
// |        unused         |
// |                       |
// |-----------------------|
// |   dynamic libraries   |
// |-----------------------|
// |                       |
// |                       |
// |        unused         |
// |-----------------------|
// |         heap          |
// |-----------------------|
// |  read/write sections  |
// |      (.data .bss)     |
// |-----------------------|
// |   readonly sections   |
// | (.init .rodata .text) |
// |-----------------------|   0x08048000
// |        reserved       |
// |-----------------------|   0x0
```

32位系统的典型内存分布：

1. 高位1GB位内核空间
2. 栈：维护函数调用上下文，向低地址增长
3. 动态链接库映射区：装载动态链接库
4. 堆：动态分配，向高地址增长
5. 可执行文件映像：装载可执行文件
6. 保留区：保护而禁止访问的区域的总称，通常极小地址不允许访问

## 栈和调用惯例